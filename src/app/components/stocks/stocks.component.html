<div class="container">
    <app-nav></app-nav>


    <app-toast [toast]="toast" (test)="toast.active=$event"></app-toast>

    <div class="modal-container" [class.modal-open]="modalOpen">
        <div class="modal card" [class.modal-content-open]="modalOpen">
            <p>Are you sure you want to delete?</p>
            <div class="button-container">
            <button class="button default" (click)="delete()">yes</button>
            <button class="button default" (click)="delete()">no</button>
        </div>
            
        </div>
    </div>
    <div class="grid-container">
        <div class="form card" [formGroup]="form">
            <input type="text" formControlName="name" placeholder="name">
            <input type="number" formControlName="price" placeholder="price" step="0.01">
            <input type="number" formControlName="buyAmount" placeholder="buy amount">
            <button class="button submit" (click)="addStock()" [class.disabled]="!form.valid"
                [disabled]="!form.valid">add stock</button>
            <button class="button submit" (click)="test()">test</button>
        </div>



        <div class="stats-container card">
            <h1>Stats</h1>

            <div *ngIf="selectedData!=null" class="status-info-container">



                <form class="box info-form" [formGroup]="sellForm" >
                    <input type="number" formControlName="currentAmount" placeholder="current value">
                    <button class="button default" (click)="calculate()" [class.disabled]="!sellForm.valid"
                    [disabled]="!sellForm.valid">calculate</button>
                </form>

            <div class="box" >
                <h3 *ngFor="let title of getTitles(selectedData)">
                    {{title}} : {{selectedData[title]}}
                </h3>
                <h3 *ngFor="let title of getTitles(stats)">
                    {{title}} : {{stats[title]}}
                </h3>
            </div>
            </div>
        </div>

        <div class="table-container card">
            <span *ngIf="data.length!=0">
                <app-table [data]="data" [additionalFeatures]="additionalFeatures" (selectedData)="getStats($event)"></app-table>
            </span>

        </div>

    </div>
</div>